package cs108;

import javax.imageio.ImageIO;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

public final class Main {
    public static void main(String[] args) throws IOException {
        BufferedImage image = ImageIO.read(new File("61.jpg"));

        String text =
                """
                        STAR WARS
                                        
                                                                Episode IV
                                        
                                                                A NEW HOPE
                                        
                                                                 From the
                                                          JOURNAL OF THE WHILLS
                                        
                                                                    by
                                                               George Lucas
                                        
                                                           Revised Fourth Draft
                                                             January 15, 1976
                                        
                                                              LUCASFILM LTD.
                                        
                                       \s
                                        
                                       A long time ago, in a galaxy far, far, away...
                                        
                                       A vast sea of stars serves as the backdrop for the main title.\s
                                       War drums echo through the heavens as a rollup slowly crawls\s
                                       into infinity.
                                        
                                            It is a period of civil war. Rebel spaceships,\s
                                            striking from a hidden base, have won their first\s
                                            victory against the evil Galactic Empire.
                                        
                                            During the battle, Rebel spies managed to steal\s
                                            secret plans to the Empire's ultimate weapon, the\s
                                            Death Star, an armored space station with enough\s
                                            power to destroy an entire planet.
                                        
                                            Pursued by the Empire's sinister agents, Princess\s
                                            Leia races home aboard her starship, custodian of\s
                                            the stolen plans that can save her people and\s
                                            restore freedom to the galaxy...
                                        
                                       The awesome yellow planet of Tatooine emerges from a total\s
                                       eclipse, her two moons glowing against the darkness. A tiny\s
                                       silver spacecraft, a Rebel Blockade Runner firing lasers\s
                                       from the back of the ship, races through space. It is pursed\s
                                       by a giant Imperial Stardestroyer. Hundreds of deadly\s
                                       laserbolts streak from the Imperial Stardestroyer, causing\s
                                       the main solar fin of the Rebel craft to disintegrate.
                                        
                                       INT. REBEL BLOCKADE RUNNER - MAIN PASSAGEWAY
                                        
                                       An explosion rocks the ship as two robots, Artoo-Detoo (R2-
                                       D2) and See-Threepio (C-3PO) struggle to make their way\s
                                       through the shaking, bouncing passageway. Both robots are\s
                                       old and battered. Artoo is a short, claw-armed tripod. His\s
                                       face is a mass of computer lights surrounding a radar eye.\s
                                       Threepio, on the other hand, is a tall, slender robot of\s
                                       human proportions. He has a gleaming bronze-like metallic\s
                                       surface of an Art Deco design.
                                        
                                       Another blast shakes them as they struggle along their way.
                                        
                                                             THREEPIO
                                                 Did you hear that? They've shut down\s
                                                 the main reactor. We'll be destroyed\s
                                                 for sure. This is madness!
                                        
                                       Rebel troopers rush past the robots and take up positions in\s
                                       the main passageway. They aim their weapons toward the door.
                                        
                                                             THREEPIO
                                                 We're doomed!
                                        
                                       The little R2 unit makes a series of electronic sounds that\s
                                       only another robot could understand.
                                        
                                                             THREEPIO
                                                 There'll be no escape for the Princess\s
                                                 this time.
                                        
                                       Artoo continues making beeping sounds. Tension mounts as\s
                                       loud metallic latches clank and the scream of heavy equipment\s
                                       are heard moving around the outside hull of the ship.
                                        
                                                             THREEPIO
                                                 What's that?
                                        
                                       EXT. SPACECRAFT IN SPACE
                                        
                                       The Imperial craft has easily overtaken the Rebel Blockade\s
                                       Runner. The smaller Rebel ship is being drawn into the\s
                                       underside dock of the giant Imperial starship.
                                        
                                       INT. REBEL BLOCKADE RUNNER
                                        
                                       The nervous Rebel troopers aim their weapons. Suddenly a\s
                                       tremendous blast opens up a hole in the main passageway and\s
                                       a score of fearsome armored spacesuited stormtroopers make\s
                                       their way into the smoke-filled corridor.
                                        
                                       In a few minutes the entire passageway is ablaze with\s
                                       laserfire. The deadly bolts ricochet in wild random patterns\s
                                       creating huge explosions. Stormtroopers scatter and duck\s
                                       behind storage lockers. Laserbolts hit several Rebel soldiers\s
                                       who scream and stagger through the smoke, holding shattered\s
                                       arms and faces.
                                        
                                       An explosion hits near the robots.
                                        
                                                             THREEPIO
                                                 I should have known better than to\s
                                                 trust the logic of a half-sized\s
                                                 thermocapsulary dehousing assister...
                                        
                                       Artoo counters with an angry rebuttal as the battle rages\s
                                       around the two hapless robots.
                                        
                                       EXT. TATOOINE - DESERT WASTELAND - DAY
                                        
                                       A death-white wasteland stretches from horizon to horizon.\s
                                       The tremendous heat of two huge twin suns settle on a lone\s
                                       figure, Luke Skywalker, a farm boy with heroic aspirations\s
                                       who looks much younger than his eighteen years. His shaggy\s
                                       hair and baggy tunic give him the air of a simple but lovable\s
                                       lad with a prize-winning smile.
                                        
                                       A light wind whips at him as he adjusts several valves on a\s
                                       large battered moisture vaporator which sticks out of the\s
                                       desert floor much like an oil pipe with valves. He is aided\s
                                       by a beatup tread-robot with six claw arms. The little robot\s
                                       appears to be barely functioning and moves with jerky motions. \s
                                       A bright sparkle in the morning sky catches Luke's eye and\s
                                       he instinctively grabs a pair of electrobinoculars from his\s
                                       utility belt. He stands transfixed for a few moments studying\s
                                       the heavens, then dashed toward his dented, crudely repaired\s
                                       Landspeeder (an auto-like transport that travels a few feet\s
                                       above the ground on a magnetic-field). He motions for the\s
                                       tiny robot to follow him.
                                        
                                                             LUKE
                                                 Hurry up! Come with me! What are you\s
                                                 waiting for?! Get in gear!
                                        
                                       The robot scoots around in a tight circle, stops short, and\s
                                       smoke begins to pour out of every joint. Luke throws his\s
                                       arms up in disgust. Exasperated, the young farm boy jumps\s
                                       into his Landspeeder leaving the smoldering robot to hum\s
                                       madly.
                                        
                                       INT. REBEL BLOCKADE RUNNER - MAIN HALLWAY
                                        
                                       The awesome, seven-foot-tall Dark Lord of the Sith makes his\s
                                       way into the blinding light of the main passageway. This is\s
                                       Darth Vader, right hand of the Emperor. His face is obscured\s
                                       by his flowing black robes and grotesque breath mask, which\s
                                       stands out next to the fascist white armored suits of the\s
                                       Imperial stormtroopers. Everyone instinctively backs away\s
                                       from the imposing warrior and a deathly quiet sweeps through\s
                                       the Rebel troops. Several of the Rebel troops break and run\s
                                       in a frenzied panic.
                                        
                                       INT. REBEL BLOCKADE RUNNER
                                        
                                       A woman's hand puts a card into an opening in Artoo's dome. \s
                                       Artoo makes beeping sounds.
                                        
                                       INT. REBEL BLOCKADE RUNNER
                                        
                                       Threepio stands in a hallway, somewhat bewildered. Artoo is\s
                                       nowhere in sight. The pitiful screams of the doomed Rebel\s
                                       soldiers can be heard in the distance.
                                        
                                                             THREEPIO
                                                 Artoo! Artoo-Detoo, where are you?
                                        
                                       A familiar clanking sound attacks Threepio's attention and\s
                                       he spots little Artoo at the end of the hallway in a smoke-
                                       filled alcove. A beautiful young girl (about sixteen years\s
                                       old) stands in front of Artoo. Surreal and out of place,\s
                                       dreamlike and half hidden in the smoke, she finishes adjusting\s
                                       something on Artoo's computer face, then watches as the little\s
                                       robot joins his companion.
                                        
                                                             THREEPIO
                                                 At last! Where have you been?
                                        
                                       Stormtroopers can be heard battling in the distance.
                                        
                                                             THREEPIO
                                                 They're heading in this direction.\s
                                                 What are we going to do? We'll be\s
                                                 sent to the spice mine of Kessel or\s
                                                 smashed into who knows what!
                                        
                                       Artoo scoots past his bronze friend and races down the\s
                                       subhallway. Threepio chases after him.
                                        
                                                             THREEPIO
                                                 Wait a minute, where are you going?
                                        
                                       Artoo responds with electronic beeps.
                                        
                                       INT. REBEL BLOCKADE RUNNER - CORRIDOR
                                        
                                       The evil Darth Vader stands amid the broken and twisted bodies\s
                                       of his foes. He grabs a wounded Rebel Officer by the neck as\s
                                       an Imperial Officer rushes up to the Dark Lord.
                                        
                                                             IMPERIAL OFFICER
                                                 The Death Star plans are not in the\s
                                                 main computer.
                                        
                                       Vader squeezes the neck of the Rebel Officer, who struggles\s
                                       in vain.
                                        
                                                             VADER
                                                 Where are those transmissions you\s
                                                 intercepted?
                                        
                                       Vader lifts the Rebel off his feet by his throat.
                                        
                                                             VADER
                                                 What have you done with those plans?
                                        
                                                             REBEL OFFICER
                                                 We intercepted no transmissions.\s
                                                 Aaah... This is a consular ship.\s
                                                 Were on a diplomatic mission.
                                        
                                                             VADER
                                                 If this is a consular ship... were\s
                                                 is the Ambassador?
                                        
                                       The Rebel refuses to speak but eventually cries out as the\s
                                       Dark Lord begins to squeeze the officer's throat, creating a\s
                                       gruesome snapping and choking, until the soldier goes limp.\s
                                       Vader tosses the dead soldier against the wall and turns to\s
                                       his troops.
                                        
                                                             VADER
                                                 Commander, tear this ship apart until\s
                                                 you've found those plans and bring\s
                                                 me the Ambassador. I want her alive!
                                        
                                       The stormtroopers scurry into the subhallways.
                                        
                                       INT. REBEL BLOCKADE RUNNER - SUBHALLWAY
                                        
                                       The lovely young girl huddles in a small alcove as the\s
                                       stormtroopers search through the ship. She is Princess Leia\s
                                       Organa, a member of the Alderaan Senate. The fear in her\s
                                       eyes slowly gives way to anger as the muted crushing sounds\s
                                       of the approaching stormtroopers grow louder. One of the\s
                                       troopers spots her.
                                        
                                                             TROOPER
                                                 There she is! Set for stun!
                                        
                                       Leia steps from her hiding place and blasts a trooper with\s
                                       her laser pistol. She starts to run but is felled by a\s
                                       paralyzing ray. The troopers inspect her inert body.
                                        
                                                             TROOPER
                                                 She'll be all right. Inform Lord\s
                                                 Vader we have a prisoner.
                                        
                                       INT. REBEL BLOCKADE RUNNER - SUBHALLWAY
                                        
                                       Artoo stops before the small hatch of an emergency lifepod.\s
                                       He snaps the seal on the main latch and a red warning light\s
                                       begins to flash. The stubby astro-robot works his way into\s
                                       the cramped four-man pod.
                                        
                                                             THREEPIO
                                                 Hey, you're not permitted in there.\s
                                                 It's restricted. You'll be deactivated\s
                                                 for sure..
                                        
                                       Artoo beeps something to him.
                                        
                                                             THREEPIO
                                                 Don't call me a mindless philosopher,\s
                                                 you overweight glob of grease! Now\s
                                                 come out before somebody sees you.
                                        
                                       Artoo whistles something at his reluctant friend regarding\s
                                       the mission he is about to perform.
                                        
                                                             THREEPIO
                                                 Secret mission? What plans? What are\s
                                                 you talking about? I'm not getting\s
                                                 in there!
                                        
                                       Artoo isn't happy with Threepio's stubbornness, and he beeps\s
                                       and twangs angrily.
                                        
                                       A new explosion, this time very close, sends dust and debris\s
                                       through the narrow subhallway. Flames lick at Threepio and,\s
                                       after a flurry of electronic swearing from Artoo, the lanky\s
                                       robot jumps into the lifepod.
                                        
                                                             THREEPIO
                                                 I'm going to regret this.
                                        
                                       INT. IMPERIAL STARDESTROYER
                                        
                                       On the main viewscreen, the lifepod carrying the two terrified\s
                                       robots speeds away from the stricken Rebel spacecraft.
                                        
                                                             CHIEF PILOT
                                                 There goes another one.
                                        
                                                             CAPTAIN
                                                 Hold your fire. There are no life\s
                                                 forms. It must have been short-
                                                 circuited.
                                        
                                       INT. LIFEPOD
                                        
                                       Artoo and Threepio look out at the receding Imperial starship. \s
                                       Stars circle as the pod rotates through the galaxy.
                                        
                                                             THREEPIO
                                                 That's funny, the damage doesn't\s
                                                 look as bad from out here.
                                        
                                       Artoo beeps an assuring response.
                                        
                                                             THREEPIO
                                                 Are you sure this things safe?
                                        
                                       EXT. TATOOINE - ANCHORHEAD SETTLEMENT - POWER STATION - DAY
                                        
                                       Heat waves radiate from the dozen or so bleached white\s
                                       buildings. Luke pilots his Landspeeder through the dusty\s
                                       empty street of the tiny settlement. An old woman runs to\s
                                       get out of the way of the speeding vehicle, shaking her fist\s
                                       at Luke as he flies past.
                                        
                                                             WOMAN
                                                 I've told you kids to slow down!
                                        
                                       INT. POWER STATION - DAY
                                        
                                       Luke bursts into the power station, waking The Fixer, a rugged\s
                                       mechanic and Camie, a sexy, disheveled girl who has been\s
                                       asleep in his lap. They grumbled as he races through the\s
                                       office, yelling wildly.
                                        
                                                             FIXER
                                                 Did I hear a young noise blast through\s
                                                 here?
                                        
                                                             CAMIE
                                                 It was just wormie on another rampage.
                                        
                                       Luke bounces into a small room behind the office where Deak\s
                                       and Windy, two tough boys about the same age as Luke, are\s
                                       playing a computer pool-like game with Biggs, a burly,\s
                                       handsome boy a few years older than the rest. His flashy\s
                                       city attire is a sharp contrast to the loose-fitting tunics\s
                                       of the farm boys. A robot repairs some equipment in the\s
                                       background.
                                        
                                                             LUKE
                                                 Shape it up you guys!... Biggs?
                                        
                                       Luke's surprise at the appearance of Biggs gives way to great\s
                                       joy and emotion. They give each other a great bear hug.
                                        
                                                             LUKE
                                                 I didn't know you were back! When\s
                                                 did you get in?
                                        
                                                             BIGGS
                                                 Just now. I wanted to surprise you,\s
                                                 hot shot. I thought you'd be here...\s
                                                 certainly didn't expect you to be\s
                                                 out working.
                                                      (he laughs)
                                        
                                                             LUKE
                                                 The Academy didn't change you\s
                                                 much...but you're back so soon? Hey,\s
                                                 what happened, didn't you get your\s
                                                 commission?
                                        
                                       Biggs has an air of cool that seems slightly phony.
                                        
                                                             BIGGS
                                                 Of course I got it. Signed aboard\s
                                                 The Rand Ecliptic last week. First\s
                                                 mate Biggs Darklighter at your\s
                                                 service...
                                                      (he salutes)
                                                 ...I just came to say good-bye to\s
                                                 all you unfortunate landlocked\s
                                                 simpletons.
                                        
                                       Everyone laughs. The dazzling spectacle of his dashing friend\s
                                       is almost too much for Luke, but suddenly he snaps out of\s
                                       it.
                                        
                                                             LUKE
                                                 I almost forgot. There's a battle\s
                                                 going on! Right here in our system.\s
                                                 Come and look!
                                        
                                                             DEAK
                                                 Not again! Forget it.
                                        
                                       EXT. TATOOINE - ANCHORHEAD - SETTLEMENT - POWER STATION -\s
                                       DAY
                                        
                                       The group stumbles out into the stifling desert sun. Camie\s
                                       and The Fixer complain and are forced to shade their eyes.\s
                                       Luke has his binoculars out scanning the heavens.
                                        
                                                             LUKE
                                                 There they are!
                                        
                                       Biggs takes the binoculars from Luke as the others strain to\s
                                       see something with the naked eye. Through the binoculars\s
                                       Biggs sees two small silver specks.
                                        
                                                             BIGGS
                                                 That's no battle, hot shot... they're\s
                                                 just sitting there! Probably a\s
                                                 freighter-tanker refueling.
                                        
                                                             LUKE
                                                 But there was a lot of firing\s
                                                 earlier...
                                        
                                       Camie grabs the binoculars away banging them against the\s
                                       building in the process. Luke grabs them.
                                        
                                                             LUKE
                                                 Hey, easy with those...
                                        
                                                             CAMIE
                                                 Don't worry about it, Wormie.
                                        
                                       The Fixer gives Luke a hard look and the young farm boy shrugs\s
                                       his shoulders in resignation.
                                        
                                                             FIXER
                                                 I keep telling you, the Rebellion is\s
                                                 a long way from here. I doubt if the\s
                                                 Empire would even fight to keep this\s
                                                 system. Believe me Luke, this planet\s
                                                 is a big hunk of nothing...
                                        
                                       Luke agrees, although it's obvious he isn't sure why. The\s
                                       group stumbles back into the power station, grumbling about\s
                                       Luke's ineptitude.
                                        
                                       INT. REBEL BLOCKADE RUNNER - HALLWAY
                                        
                                       Princess Leia is led down a low-ceilinged hallway by a squad\s
                                       of armored stormtroopers. Her hands are bound and she is\s
                                       brutally shoved when she is unable to keep up with the briskly\s
                                       marching troops. They stop in a smoky hallway as Darth Vader\s
                                       emerges from the shadows. The sinister Dark Lord stares hard\s
                                       at the frail young senator, but she doesn't move.
                                        
                                                             LEIA
                                                 Lord Vader, I should have known.\s
                                                 Only you could be so bold. The\s
                                                 Imperial Senate will not sit for\s
                                                 this, when they hear you've attacked\s
                                                 a diplomatic...
                                        
                                                             VADER
                                                 Don't play games with me, Your\s
                                                 Highness. You weren't on any mercy\s
                                                 mission this time. You passed directly\s
                                                 through a restricted system. Several\s
                                                 transmissions were beamed to this\s
                                                 ship by Rebel spies. I want to know\s
                                                 what happened to the plans they sent\s
                                                 you.
                                        
                                                             LEIA
                                                 I don't know what you're talking\s
                                                 about. I'm a member of the Imperial\s
                                                 Senate on a diplomatic mission to\s
                                                 Alderaan...
                                        
                                                             VADER
                                                 You're a part of the Rebel Alliance...\s
                                                 and a traitor. Take her away!
                                        
                                       Leia is marched away down the hallway and into the smoldering\s
                                       hole blasted in the side of the ship. An Imperial Commander\s
                                       turns to Vader.
                                        
                                                             COMMANDER
                                                 Holding her is dangerous. If word of\s
                                                 this gets out, it could generate\s
                                                 sympathy for the Rebellion in the\s
                                                 senate.
                                        
                                                             VADER
                                                 I have traced the Rebel spies to\s
                                                 her. Now she is my only link to find\s
                                                 their secret base!
                                        
                                                             COMMANDER
                                                 She'll die before she tells you\s
                                                 anything.
                                        
                                                             VADER
                                                 Leave that to me. Send a distress\s
                                                 signal and then inform the senate\s
                                                 that all aboard were killed!
                                        
                                       Another Imperial Officer approaches Vader and the Commander.\s
                                       They stop and snap to attention.
                                        
                                                             SECOND OFFICER
                                                 Lord Vader, the battle station plans\s
                                                 are not aboard this ship! And no\s
                                                 transmissions were made. An escape\s
                                                 pod was jettisoned during the\s
                                                 fighting, but no life forms were\s
                                                 aboard.
                                        
                                       Vader turns to the Commander.
                                        
                                                             VADER
                                                 She must have hidden the plans in\s
                                                 the escape pod. Send a detachment\s
                                                 down to retrieve them. See to it\s
                                                 personally, Commander. There'll be\s
                                                 no one to stop us this time.
                                        
                                                             COMMANDER
                                                 Yes, sir.
                                        
                                        
                """;
        System.out.println(STR."Text to insert: \{text}");
        BufferedImage insertedImage = Steganographer.insert(image, text);

        ImageIO.write(insertedImage, "jpg", new File("61_mod.jpg"));

        String extracted = Steganographer.extract(insertedImage);
        System.out.println(STR."Extracted text: \{extracted}");
    }
}
